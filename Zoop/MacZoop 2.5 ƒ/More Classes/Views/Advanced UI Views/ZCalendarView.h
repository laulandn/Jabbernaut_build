/****************************************************************************************************			MacZoop - "the framework for the rest of us"		 ****			ZCalendarView.h		-- view for picking dates******			©2000, Graham Cox*****************************************************************************************************/#pragma once#ifndef __ZCALENDARVIEW__#define	__ZCALENDARVIEW__#include	"ZView.h"DEFINECLASSID( ZCalendarView, 'zcav' );// the class:class	ZCalendarView	: public ZView{protected:	short			fYear;			// current year displayed, 1904-2040	short			fMonth;			// current month displayed	1-12	short			fCellH;			// width of cell	short			fCellV;			// height of cell	short			fItl1ResID;		// resource ID of current itl1 resource	Point			fDayCell;		// current day's cell	Rect			fHotLeft;		// hotspot for going to the previous month	Rect			fHotRight;		// hotspot for going to the next month	Boolean			fMondayIsDay1;	// TRUE if weeks starts on Monday, not Sunday	DateTimeRec		fSelDate;		// date selected (hilited)public:	ZCalendarView( ZView* aParent, Rect* aFrame = NULL, const Boolean isHandler = TRUE );	ZCalendarView( ZView* aParent, const short viewResourceID );		virtual void		DrawContent();	virtual void		ClickContent( const Point mouse, const short modifiers );    virtual void        Type( const char theKey, const short modifiers );	virtual void		DoSelectionUpdate( Boolean state );	virtual void		SetSize( const short width, const short height );	virtual void		UpdateMenus();	virtual void		DoCopy();// calendar specific:	virtual void		SetCalendar( const short aYear, const short aMonth, const Boolean reDraw = TRUE );	inline	void		GetSelectedDate( DateTimeRec* dt ) { *dt = fSelDate; };// RAD tool support:	virtual void		InitViewFromResource( Handle theRes );	virtual void		CreateViewResource( Handle resHandle );protected:	virtual short		CellToDay( const short cellx, const short celly, DateTimeRec* dtr = NULL );	virtual Boolean		ClickHots( Point hitPos );	virtual void		DrawArrowIcon( const short which, const Boolean state );	virtual Boolean		TrackArrowIcon( const Point hitPt, const short which);	virtual void		CalcCalendarFrame( Rect* toFit );	virtual void		HiliteCell( Point aCell );	virtual Boolean		SelectionVisible( Boolean recompute = FALSE );	virtual void        ChangeSelection( Point toCell );	virtual void        SetNextMonth();	virtual void        SetPreviousMonth();};enum{	kMsgNewDaySelected		= 'day+',	kMsgNewMonthSelected	= 'mnth',	kMsgNewYearSelected		= 'year',	kIconArrowWidth			= 4,	kIconArrowHeight		= 7,	kCellsAcross			= 7,	kCellsDown				= 6,	kTitleAreaHeight		= 30,	kSecondsIn1Day			= 86400L	// 24 * 60 * 60};// creator function can be regeistered as dialog item:ZView*	CreateNewCalendarView( ZView* aParent, Rect* aFrame, const short pCount, long params[] );#if PRAGMA_ALIGN_SUPPORTED#pragma options align=mac68k#endif// structure of 'View' resource for ZCalendarView:typedef struct{	ViewTemplate		vt;	short				year;	short				month;	short				day;}CalendarViewTemplate, *CalendarViewTemplatePtr, **CalendarViewTemplateHdl;#if PRAGMA_ALIGN_SUPPORTED#pragma options align=reset#endif#endif