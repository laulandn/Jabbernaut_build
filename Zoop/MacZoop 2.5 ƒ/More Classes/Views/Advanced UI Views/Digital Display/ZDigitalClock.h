/****************************************************************************************************			MacZoop - "the framework for the rest of us"		 ****			ZDigitalClock.h		-- implements a simulated electronic digital clock******			©2000, Graham Cox*****************************************************************************************************/#pragma once#ifndef __ZDIGITALCLOCK__#define	__ZDIGITALCLOCK__#include	"ZDigitalView.h"// clock modes:enum{	kDVClockStdTimeMode,	kDVClock24HourTimeMode,	kDVClockElapsedMode,	kDVClockLapCountMode,	kDVClockUpCountingMode,	kDVClockDownCountingMode};// clock control calls for counting mode:enum{	kDVClockCtrlStartCount,	kDVClockCtrlHoldCount,	kDVClockCtrlReset};DEFINECLASSID( ZDigitalClock, 'zclk' );// the class:class	ZDigitalClock	: public ZDigitalView{protected:	unsigned long		fTimeBaseRegister;			unsigned long		fElapsedRegister;	unsigned long		fCountRegister;	short				fMode;	short				fLastSec;	Boolean				fColonPhase;	Boolean				fRunning;	public:	ZDigitalClock( ZView* aParent, Rect* aFrame );		virtual void		DrawContent();	virtual void		DoTimer( long id );		virtual void		SetMode( const short aMode );	virtual void		PresetCounter( const long aCount );	virtual void		ControlCounter( const short ctrlOp );	protected:	virtual BCD_32		GetTimeAsBCD();	virtual BCD_32		SecondsToBCD( long secs );	virtual void		DrawColons( short hPosition );	virtual void		AlarmAction();	virtual BCD_32		CalcLZBMask();};// messages:enum{	kMsgDVClockTimeOut		= 'ckto'};// global function may be registered as dialog item constructor function;ZView*		CreateNewDigitalClock( ZView* aParent, Rect* aFrame, short param );#if PRAGMA_ALIGN_SUPPORTED#pragma options align=mac68k#endif// structure of 'View' resource for ZDigitalClock:typedef struct{	DigitalViewTemplate		dvt;	short					mode;	long					preset;}DigitalClockTemplate, *DigitalClockTemplatePtr, **DigitalClockTemplateHdl;#if PRAGMA_ALIGN_SUPPORTED#pragma options align=reset#endif/*This class builds on ZDigitalView to implement a clock display. It can operatein several modes - time of day, elapsed time, stopwatch, up and down counters.*/#endif