/****************************************************************************************************			MacZoop - "the framework for the rest of us"		 ****			ZGrafState.cpp		-- a simple object for saving and restoring grafport state***			© 1997, Graham Cox****************************************************************************************************/#include	"ZGrafState.h"#include	"MacZoop.h"/*--------------------------------***  CONSTRUCTOR  ***---------------------------------*/ZGrafState::ZGrafState(){	FailNIL( clip = NewRgn());	Record();}/*---------------------------------***  DESTRUCTOR  ***---------------------------------*/ZGrafState::~ZGrafState(){	Restore();		if ( clip )	    DisposeRgn( clip );}/*-----------------------------------***  Record  ***-----------------------------------*//*access:			public	overrides:description: 	record the state of the current portins: 			noneouts: 			nonenotes:----------------------------------------------------------------------------------------*/void	ZGrafState::Record(){	GetGWorld( &port, &dev );	GetClip( clip );	GetPenState( &pen );	GetBackColor( &back );	GetForeColor( &fore );		font 	= PORTTEXTFONT( port );	fSize 	= PORTTEXTSIZE( port );	fStyle 	= PORTTEXTFACE( port );	fMode 	= PORTTEXTMODE( port );		#if APPEARANCE_MGR_AWARE	if ( gMacInfo.hasAppearanceMgr )		GetThemeDrawingState( &tds );#endif}/*----------------------------------***  Restore  ***-----------------------------------*//*access:			public	overrides:description: 	restore the state of the current port to what was recorded previouslyins: 			noneouts: 			nonenotes:----------------------------------------------------------------------------------------*/void	ZGrafState::Restore(){	SetGWorld( port, dev );	SetClip( clip );		SetPenState( &pen );	RGBForeColor( &fore );	RGBBackColor( &back );		TextFont( font );	TextSize( fSize );	TextFace( fStyle );	TextMode( fMode );#if APPEARANCE_MGR_AWARE	if ( gMacInfo.hasAppearanceMgr )		SetThemeDrawingState( tds, TRUE );#endif}