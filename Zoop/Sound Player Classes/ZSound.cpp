/****************************************************************************************************			MacZoop - "the framework for the rest of us"	 ****			ZSound.cpp		-- oject wrapper for single sound******			© 2000, Graham Cox*****************************************************************************************************/#include	"ZSound.h"#include	"ZErrors.h"ZSound::ZSound( const short aResID, Boolean isTemp )	: ZObject(){	isTempSound = isTemp;	resID = aResID;	refCount = 0;	ownsSound = TRUE;		FailNILRes( macSound = (SndListHandle) GetResource( soundListRsrc, resID ));		HNoPurge((Handle) macSound );	MoveHHi((Handle) macSound );}ZSound::ZSound( Handle existingSound, Boolean isTemp, Boolean autoDispose )	: ZObject(){	isTempSound = isTemp;	resID = 0;	refCount = 0;	ownsSound = autoDispose;		FailNILParam( macSound = (SndListHandle) existingSound );	HNoPurge((Handle) macSound );	MoveHHi((Handle) macSound );}ZSound::~ZSound(){	if ( ownsSound && macSound )	{		HUnlock((Handle) macSound );		HPurge((Handle) macSound );				char	hs;				hs = HGetState((Handle) macSound );				if ( hs & 0x20 )			ReleaseResource((Handle) macSound );		else			DisposeHandle((Handle) macSound );	}}void	ZSound::Acquire(){	if ( refCount == 0 )		HLock((Handle) macSound );			refCount++;}void	ZSound::Release(){	refCount--;		if ( refCount <= 0 )	{		HUnlock((Handle) macSound );		refCount = 0;	}} 